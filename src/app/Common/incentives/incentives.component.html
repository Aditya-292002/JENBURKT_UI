<!-- <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/dashboard"><i class="fa fa-home mr-2"
                    aria-hidden="true"></i>Dashboard</a></li>
        <li class="breadcrumb-item active" aria-current="page">Volume Incentive</li>
    </ol>
</nav>

<div class="container-fluid ">
    <div class="col-md-12">
        <div class="d-flex mb-2">
            <div class="d-flex justify-content-start">
                <h5 class="mb-0 headers">Volume Incentive</h5>
            </div>
            <div class="buttonBox ml-auto">

            </div>
        </div>
    </div>

    <div class="container-fluid ">
        <app-loader *ngIf="isLoaded"></app-loader>
        <div class="row">

            <div class="col-md-6">
                <div class="card" id="card">
                    <p-table [value]="CURR_INCENTIVE_MONTH" responsiveLayout="scroll" scrollHeight="420px" #dt1>

                        <ng-template pTemplate="caption">
                            <div class="target-section">
                                <p class="mb-0">Current Month Details</p>
                            </div>
                        </ng-template>

                        <ng-template pTemplate="header">
                            <tr>
                                <th>Details</th>
                                <th>Value</th>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-rowData>
                            <tr>
                                <td>{{ rowData.field }}</td>
                                <td>  {{ rowData.format== 'S'? rowData.value : (rowData.value | number:'1.0-0') }}</td>
                            </tr>
                        </ng-template>
                    </p-table>

                </div>
            </div>
            <div class="col-md-6">
                <div class="card" id="card">
                    <p-table [value]="INCENTIVE_LIST" responsiveLayout="scroll" scrollHeight="420px"
                        [globalFilterFields]="['PERIOD_DESC']" #dt1>
                        <ng-template pTemplate="caption">
                            <div class="table-header text-right">
                                  <div class="target-section">
                             <p class="mb-0">All Months Details </p>
                             </div>
                              
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header">
                            <tr>
                                   <th pSortableColumn="PERIOD_DESC">MONTH
                                </th>
                                <th pSortableColumn="PERIOD_SALES" class="width-12">NET SALES </th>
                                <th pSortableColumn="CM_INC" class="width-12">INCENTIVE</th>
                                <th pSortableColumn="NM_ACHV">NEXT MONTH ACHIEVED
                                </th>
                                <th pSortableColumn="ACHV_INC">ACHIEVED INCENTIVE </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-data let-rowIndex="rowIndex">
                            <tr>
                                <td >{{ data.PERIOD_DESC }}</td>
                                <td >{{ data.PERIOD_SALES | number:'1.0-0'}}</td>
                                <td class="width-12">{{ data.CM_INC | number:'1.0-0' }}</td>
                                <td >{{ data.NM_ACHV }}</td>
                                <td >{{ data.ACHV_INC }}</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>

        </div>
    </div>
</div> -->
<div class="dashboard-container">
  <div class="header">
    <h1>Volume Incentive Dashboard</h1>
    <p class="subtitle">Current Month: {{ currentMonthData.currentMonth }}</p>
  </div>

  <!-- Current Month Summary Cards -->
  <div class="summary-cards">
    <div class="card">
      <div class="card-header">
        <h3>Current Month Sale</h3>
      </div>
      <div class="card-body">
        <div class="metric-value">{{ formatCurrency(currentMonthData.currentMonthSale) }}</div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h3>Target Value</h3>
      </div>
      <div class="card-body">
        <div class="metric-value">{{ formatCurrency(currentMonthData.targetValue) }}</div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h3>Balance to Achieve</h3>
      </div>
      <div class="card-body">
        <div class="metric-value">{{ formatCurrency(currentMonthData.balanceToAchieve) }}</div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h3>Incentive on Target Achievement</h3>
      </div>
      <div class="card-body">
        <div class="metric-value">{{ formatCurrency(currentMonthData.incentiveOnTarget) }}</div>
      </div>
    </div>
  </div>

  <!-- Progress Bar -->
  <div class="progress-section">
    <h3>Target Achievement Progress</h3>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
    </div>
    <p class="progress-text">{{ getProgressPercentage().toFixed(1) }}% of target achieved</p>
  </div>

  <!-- Charts Container -->
  <div class="charts-container">
    <!-- Sales Chart -->
    <div class="chart-card">
      <canvas id="salesChart"></canvas>
    </div>



    <!-- Progress Doughnut Chart -->
    <div class="chart-card">
      <canvas id="progressChart"></canvas>
    </div>
  </div>

  <!-- Historical Data Table -->
  <div class="table-section">
    <h3>Historical Performance</h3>
    <div class="table-responsive">
      <table class="data-table">
        <thead>
          <tr>
            <th>Month</th>
            <th>Net Sales</th>
            <!-- <th>Incentive</th> -->
            <th>Next Month Achieved</th>
            <th>Achieved Incentive</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of historicalData">
            <td>{{ item.month }}</td>
            <td>{{ formatCurrency(item.netSales) }}</td>
            <!-- <td>{{ formatCurrency(item.incentive) }}</td> -->
            <td>
              <span class="status-badge" [class.success]="item.nextMonthAchieved === 'Y'" 
                    [class.danger]="item.nextMonthAchieved === 'N'">
                {{ item.nextMonthAchieved }}
              </span>
            </td>
            <td>{{ formatCurrency(item.achievedIncentive) }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>